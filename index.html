<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>KALRO Livestock</title>

<style>
:root {
  --accent:#4c9a2a;
}
body {
  margin:0;
  padding-top:100px;
  font-family:Arial,sans-serif;
  background:#eef7e5;
}
header {
  position:fixed;top:0;left:0;right:0;
  background:white;
  padding:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.1);
  z-index:999;
}
.container {max-width:1200px;margin:auto;padding:20px;}
.grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:20px;
}
.card {
  background:white;
  border-radius:12px;
  padding:15px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}
.card img {
  width:100%;
  height:160px;
  object-fit:cover;
  border-radius:10px;
}
.buy-btn {
  width:100%;
  padding:10px;
  background:#35751a;
  color:white;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
  margin-top:8px;
}
.admin-btn {
  background:#d60000;
  color:white;
  border:none;
  padding:6px;
  width:100%;
  margin-top:6px;
  border-radius:6px;
  cursor:pointer;
}
input,textarea {
  width:100%;
  padding:6px;
  margin-top:6px;
}
#adminPanel {
  background:white;
  padding:15px;
  border-radius:12px;
  margin-bottom:20px;
}
#adminControls {display:none;}
</style>
</head>

<body>

<header>
  <h2 style="margin:0">KALRO Livestock Admin System</h2>
</header>

<div class="container">

<!-- ADMIN PANEL -->
<div id="adminPanel">
  <h3>Admin Login</h3>
  <input type="password" id="adminPass" placeholder="Admin password">
  <button onclick="loginAdmin()">Login</button>

  <div id="adminControls">
    <h4>Add New Item</h4>
    <input type="file" id="imageUpload" accept="image/*">
    <input type="text" id="titleInput" placeholder="Title">
    <textarea id="descInput" placeholder="Description"></textarea>
    <input type="text" id="priceInput" placeholder="Price">
    <button onclick="addItem()">Add Item</button>
  </div>
</div>

<!-- PRODUCT GALLERY -->
<h3>Livestock Available</h3>
<div class="grid" id="gallery"></div>

</div>

<script>
const ADMIN_PASSWORD = "1234"; // ðŸ”’ CHANGE THIS
let isAdmin = false;

let items = JSON.parse(localStorage.getItem("items")) || [];

function loginAdmin() {
  if (document.getElementById("adminPass").value === ADMIN_PASSWORD) {
    isAdmin = true;
    document.getElementById("adminControls").style.display = "block";
    alert("Admin logged in");
    render();
  } else alert("Wrong password");
}

function addItem() {
  const file = document.getElementById("imageUpload").files[0];
  const title = titleInput.value;
  const desc = descInput.value;
  const price = priceInput.value;

  if (!file || !title || !price) return alert("Fill all fields");

  const reader = new FileReader();
  reader.onload = () => {
    items.push({
      img: reader.result,
      title,
      desc,
      price
    });
    save();
    clearInputs();
    render();
  };
  reader.readAsDataURL(file);
}

function deleteItem(i) {
  if (!confirm("Delete item?")) return;
  items.splice(i,1);
  save();
  render();
}

function editItem(i) {
  const t = prompt("Edit title", items[i].title);
  const d = prompt("Edit description", items[i].desc);
  const p = prompt("Edit price", items[i].price);
  if (t !== null) items[i].title = t;
  if (d !== null) items[i].desc = d;
  if (p !== null) items[i].price = p;
  save();
  render();
}

function save() {
  localStorage.setItem("items", JSON.stringify(items));
}

function clearInputs() {
  imageUpload.value = "";
  titleInput.value = "";
  descInput.value = "";
  priceInput.value = "";
}

function render() {
  const g = document.getElementById("gallery");
  g.innerHTML = "";
  items.forEach((item,i)=>{
    g.innerHTML += `
    <div class="card">
      <img src="${item.img}">
      <h4>${item.title}</h4>
      <p>${item.desc || ""}</p>
      <strong>${item.price}</strong>
      <button class="buy-btn"
        onclick="window.open('https://wa.me/254762457938','_blank')">
        BUY NOW
      </button>
      ${isAdmin ? `
        <button class="admin-btn" onclick="editItem(${i})">Edit</button>
        <button class="admin-btn" onclick="deleteItem(${i})">Delete</button>
      ` : ""}
    </div>`;
  });
}

render();
</script>

</body>
</html>
